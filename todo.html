---
layout: default
title: Todo List
permalink: /todo/
---
<div class="container">
    <div class="page-header">
        <h1>Todo List</h1>
        <p>Manage your tasks efficiently with this simple todo list application.</p>
    </div>

    <div class="todo-wrapper">
        <input type="text" id="todo-input" placeholder="Add a new task..." />
        <button id="add-todo-btn">Add Task</button>
    </div>

    <ul id="todo-list">
        <!-- Items dynamically added here -->
    </ul>
</div>
<script>
    // Load todos from API
    function loadTodos() {
        fetch('http://localhost:3001/api/todos')
            .then(res => res.json())
            .then(todos => {
                const todoList = document.getElementById('todo-list');
                todoList.innerHTML = '';
                todos.forEach((todo, idx) => {
                    const li = document.createElement('li');
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = 'task' + idx;
                    checkbox.checked = todo.completed;
                    checkbox.addEventListener('change', () => {
                        fetch(`http://localhost:3001/api/todos/${idx}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ completed: checkbox.checked })
                        });
                    });

                    const label = document.createElement('input');
                    label.type = 'text';
                    label.value = todo.text;
                    label.id = 'label' + idx;
                    label.addEventListener('change', () => {
                        fetch(`http://localhost:3001/api/todos/${idx}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ text: label.value })
                        }).then(() => loadTodos());
                    });

                    // Delete button
                    const deleteBtn = document.createElement('button');
                    deleteBtn.textContent = 'Delete';
                    deleteBtn.addEventListener('click', () => {
                        fetch(`http://localhost:3001/api/todos/${idx}`, {
                            method: 'DELETE'
                        }).then(() => loadTodos());
                    });

                    li.appendChild(checkbox);
                    li.appendChild(label);
                    li.appendChild(deleteBtn);
                    todoList.appendChild(li);
                });
            });
    }

    // Add new todo via API
    document.getElementById('add-todo-btn').addEventListener('click', () => {
        const input = document.getElementById('todo-input');
        const text = input.value.trim();
        if (text) {
            fetch('http://localhost:3001/api/todos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text, completed: false })
            }).then(() => {
                input.value = '';
                loadTodos();
            });
        }
    });

    // Initial load
    window.addEventListener('DOMContentLoaded', loadTodos);
</script>